<link rel="stylesheet" href="https://unpkg.com/ngx-bootstrap/datepicker/bs-datepicker.css">

<div class="right">
  <app-sumarydia [fecha]="bsValue" [conceptosDiarios]="conceptos"></app-sumarydia>
  <app-sumarymes [fecha]="bsValue" [sumaryMonth]="sumMonth"> </app-sumarymes>
</div>


<div class="left">
  <div class="fechaHolder">
    <input type="text"
            class="form-control fecha"
            #dp="bsDatepicker"
            bsDatepicker 
            (ngModelChange)="changeDay($event)"
            [ngModel]="bsValue"
            [bsConfig]="{dateInputFormat: 'LL'}">
  </div>
  
  <table *ngIf="conceptos!==undefined && loading === false" class="table">
    <thead>
      <tr>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr class="selected" id="tr{{item.idconcepto}}" *ngFor="let item of conceptos; let odd=odd; let even=even;" 
          (click)="openModal(template, item)"
          [class.info]="odd"
          [class.success]="even">
        <td >{{item.descripcion}}</td>
        <td class="importe"
            [class.importeNegativo]="item.importe < 0 || item.credito === 0">
            {{item.importe | currency:this._userService.getMoneda()}}
        </td>
      </tr>
    </tbody>
  </table>
  <app-loading *ngIf="loading === true" [texto]="'Cargando...'"></app-loading>
</div>

<ng-template #template>
  <div class="modal-body text-center">
    <p>{{conceptoSel.descripcion}}</p>

    <input #importe2 
            autofocus
            name="importe" 
            class="form-control"
            [class.importeNegativo]="!nuevoDebCred" 
            currencyMask
            [options]="currencyMaskOptions"
            [(ngModel)]="nuevoImporte" 
            (keyup.enter)="confirm()"
            (click)="importe2.select()" />
      <br/>
      <table width="100%">
          <thead>
            <tr>
              <th class="debito">
                <label for="creditoopt">Credito</label>
                <input type="radio" 
                       id="creditoopt" 
                       name="debcred" 
                       (click)="changeNuevoDebCred(1)"
                       [checked]="nuevoDebCred === 1">
              </th>
              <th class="debito importeNegativo">
                <label for="debitoopt">Debito</label>
                <input type="radio" 
                       id="debitoopt" 
                       name="debcred"
                       (click)="changeNuevoDebCred(0)"
                       [checked]="nuevoDebCred === 0">
              </th>
            </tr>
          </thead>
        </table>
      <br/>
      <button type="submit" class="btn btn-success" (click)="confirm()" >Aceptar</button>
  </div>
</ng-template>
